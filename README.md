# itmo_devops_part2
Репозиторий для загрузки домашних заданий по курсу "Контейнеризация и оркестрация приложений". 

Состав команды: Воляница Елизавета, Фёдорова Инесса

12.05.2023 - ЛР 1. Airflow + Dockerfile - ветка main

18.05.2023 - ЛР 2. Docker-compose - ветка hw2

## Запуск проекта

- [ ] Собрать и запустить проект можно с помощью команды: `docker compose up --build -d`
- [ ] Данные пользователя - username: `airflow_user`, password: `airflow_password`


## Задача
Написать два Dockerfile – плохой и хороший. Написать две плохие практики по использованию контейнеров. 
Плохой Dockerfile должен запускаться и работать корректно, но в нём должно быть не менее 3 “bad practices”. В хорошем они должны быть исправлены. В Readme описать все плохие практики из кода Dockerfile и почему они плохие, как они были исправлены в хорошем Dockerfile, а также две плохие практики по использованию этого контейнера. Написать два случая, когда НЕ стоит использовать контейнеры в целом.

### "Плохой" Dockerfile

Примеры плохих практик:

1. Использование тега latest. Образы с тегом latest обновляются без уведомления, и это может внести нестабильность, так как новые версии могут содержать изменения, несовместимые с текущей конфигурацией или кодом. 
2. Запуск нескольких процессов в одном контейнере. Когда в одном контейнере работает несколько процессов, это может привести к ситуации, когда ошибка в одном процессе повлияет на другие, и управление ресурсами становится сложнее.
3. Хранение учетных данных непосредственно в Dockerfile. В примере настройки нет ясного разделения между зависимостями для различных сред (например, разработки и продакшена), что может привести к ситуациям, когда в продакшн попадают зависимости, нужные только для разработки.

### "Хороший" Dockerfile

1. Используется конкретная версия образа.
2. Каждый процесс запускается в своем контейнере.
3. Учетные данные тянутся из настроек окружения.

### НЕ стоит использовать контейнеры, если:

- **У вас монолитное приложение**. Монолитные сервисы, как правило, имеют много тяжеловесных зависимостей, что значительно замедляет сборку контейнера и осложняет дальнейшую отладку приложений.
- **Нужна высокая производительность и быстрый доступ к аппаратным ресурсам**. В данном случае контейнер будет сильно уступать физическому серверу или же виртуальной машине.
- **Нужна безопасность из коробки**. Как и при любой разработке при использовании Docker стоит внимательно следить за версиями образов и мониторить CVE и актуальные рекомендации по безопасному использованию контейнеров.

### НЕ стоит делать с контейнерами:
- **Создавать большой образ, с библиотеками и утилитами для всего**. Большие образы сложнее распространять и сложнее отлаживать живущие в них приложения. Стоит ставить только необходимые библиотеки и утилиты.
- **Хранить файлы в контейнере**. Данные из контейнера удяляются вместе с ним, поэтому все необходимые логи и файлы лучше хранить и записывать в volume.
- **Пушить образы только с тегом latest**. При таком сетапе каждый следующий образ будет перезаписывать актуальный, что не позволит, в случае необходимости, откатиться к определенной стабильной версии. 

## Описание DAG

Данный DAG предназначен для обучения модели градиентного бустинга на задачу бинарной классификации (файл для обучения - /data/train.csv, файл для тестирования - /data/test.csv). Результат выполнения - модель, сохраненная в /data/model.pkl.

Этапы выполнения:
- read_csv - чтение файла для обучения
- preprocess_data - подготовка данных, разделение на тренировочную и тестовую выборки
- train_model - обучение и сохранение модели
- test_model - подсчет качества на тестовой выборке 


